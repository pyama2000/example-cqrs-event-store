desc: Generated by `runn new`
runners:
  req: http://localhost:8080
steps:
  create_order:
    req:
      /orders:
        post:
          body:
            application/json:
              order:
                delivery_address: 東京都
                restaurant_id: 0190e34f-054f-7de1-890e-56d1f4bf0ccb
                user_id: 0190e34f-054f-7de1-890e-56d1f4bf0ccb
              order_items:
                - item_id: 0190e34f-054f-7de1-890e-56d1f4bf0ccb
                  price: 1000
                  quantity: 5
    test: current.res.status == 202
  prepare:
    req:
      /orders/{{ steps.create_order.res.body.id }}:
        post:
          body:
            application/json:
              command: prepare
              current_aggregate_version: 1
    test: current.res.status == 202
  assigning_delivery_person:
    req:
      /orders/{{ steps.create_order.res.body.id }}:
        post:
          body:
            application/json:
              command:
                assigning_delivery_person:
                  delivery_person_id: 0190e34f-054f-7de1-890e-56d1f4bf0ccb
              current_aggregate_version: 2
    test: current.res.status == 202
  ready_for_pickup:
    req:
      /orders/{{ steps.create_order.res.body.id }}:
        post:
          body:
            application/json:
              command: ready_for_pickup
              current_aggregate_version: 3
    test: current.res.status == 202
  delivery_person_picking_up:
    req:
      /orders/{{ steps.create_order.res.body.id }}:
        post:
          body:
            application/json:
              command: delivery_person_picking_up
              current_aggregate_version: 4
    test: current.res.status == 202
  delivered:
    req:
      /orders/{{ steps.create_order.res.body.id }}:
        post:
          body:
            application/json:
              command: delivered
              current_aggregate_version: 5
    test: current.res.status == 202
  cancel:
    req:
      /orders/{{ steps.create_order.res.body.id }}:
        post:
          body:
            application/json:
              command: cancel
              current_aggregate_version: 6
    test: current.res.status == 202
